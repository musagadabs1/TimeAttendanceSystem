@model DropdownTest.Models.Employee

@{
    ViewBag.Title = "Index";
}

<h2>Index</h2>

@Html.DropDownListFor(model => model.EmployeeId, new SelectList( Model.EmpListItems, "Value", "Text"), new { @class = "form-control", @id = "ddlEmployee" })
<!--getEmployeeDetails()-->

<div id="partialDiv">

</div>
<script src="~/Scripts/jquery-3.3.1.js"></script>

<script type="text/javascript">

    $(document).ready(function () {
        $("#ddlEmployee").change(function () {
            $.ajax({
                type: "GET",
                url: '@Url.Action("GetEmpRecord")' + '?EmployeeId=' + $("#ddlEmployee").val(),
                data: {},
                success: function (result) {
                    alert(result);
                }
                //,
                //error: function () {
                //    alert('Error');
                //}
            });
        });
    });

    //function getEmployeeDetails() {
    //    $.post("/Employees/GetEmpRecord", {
    //        EmployeeId: $("#ddlEmployee").val()
    //    },
    //        function (data) {
    //            $("#partialDiv").html(data)
    //        },
    //    );



    //};

    //$(document).ready(function () {
    //    $('#ddlEmployee').on('change', function () {
    //        $.ajax(
    //            {
    //                url: '/Employees/GetEmpRecord?EmployeeId=' + $(this).attr("value"),
    //                type: 'GET',
    //                data: {},
    //                contentType: 'application/json; charset=utf-8',
    //                success: function (data) {
    //                    $("#partialDiv").html(data);
    //                },
    //                error: function () {
    //                    alert("error");
    //                }
    //            });
    //    });
    //});


</script>

